# Домашнее задание к занятию 10.3 "`Pacemaker`" - `Емельянов Михаил`

### Инструкция по выполнению домашнего задания

   1. Сделайте `fork` [репозитория c шаблоном решения](https://github.com/netology-code/sys-pattern-homework) к себе в GitHub и переименуйте его по названию или номеру занятия, например, https://github.com/имя-вашего-репозитория/gitlab-hw или https://github.com/имя-вашего-репозитория/8-03-hw.
   2. Выполните клонирование этого репозитория к себе на ПК с помощью команды `git clone`.
   3. Выполните домашнее задание и заполните у себя локально этот файл README.md:
      - впишите сверху название занятия, ваши фамилию и имя;
      - в каждом задании добавьте решение в требуемом виде — текст, код, скриншоты, ссылка;
      - для корректного добавления скриншотов используйте [инструкцию «Как вставить скриншот в шаблон с решением»](https://github.com/netology-code/sys-pattern-homework/blob/main/screen-instruction.md);
      - при оформлении используйте возможности языка разметки md. Коротко об этом можно посмотреть в [инструкции  по MarkDown](https://github.com/netology-code/sys-pattern-homework/blob/main/md-instruction.md).
   4. После завершения работы над домашним заданием сделайте коммит `git commit -m "comment"` и отправьте его на GitHub `git push origin`.
   5. Для проверки домашнего задания в личном кабинете прикрепите и отправьте ссылку на решение в виде md-файла в вашем GitHub.
   6. Любые вопросы по выполнению заданий задавайте в чате учебной группы или в разделе «Вопросы по заданию» в личном кабинете.
   
Желаем успехов в выполнении домашнего задания!

---

### Задание 1

Опишите основные функции и назначение Pacemaker.

*Приведите ответ в свободной форме.*

#### ОТВЕТ:

Pacemaker — менеджер ресурсов кластера. Он позволяет использовать службы и объекты в рамках одного кластера из двух или более нод.

Вот вкратце его достоинства:
1. позволяет находить и устранять сбои на уровне нод и служб;
2. не зависит от подсистемы хранения: можем забыть общий накопитель, как страшный сон;
3. не зависит от типов ресурсов: все, что можно прописать в скрипты, можно кластеризовать;
4. поддерживает STONITH (Shoot-The-Other-Node-In-The-Head), то есть умершая нода изолируется и запросы к ней не поступают, пока нода не отправит сообщение о том, что она снова в рабочем состоянии;
5. поддерживает кворумные и ресурсозависимые кластеры любого размера;
6. поддерживает практически любую избыточную конфигурацию;
7. может автоматически реплицировать конфиг на все узлы кластера — не придется править все вручную;
8. можно задать порядок запуска ресурсов, а также их совместимость на одном узле;
9. поддерживает расширенные типы ресурсов: клоны (когда ресурс запущен на множестве узлов) и дополнительные состояния (master/slave и подобное) — актуально для СУБД (MySQL, MariaDB, PostgreSQL, Oracle);
10. имеет единую кластерную оболочку CRM с поддержкой скриптов.

Суть в том, что с помощью Corosync строим кластер, а следим за его состоянием с помощью Pacemaker.

---

### Задание 2

Опишите основные функции и назначение Corosync.

*Приведите ответ в свободной форме.*

#### ОТВЕТ:

Corosync — программный продукт, который позволяет создавать единый кластер из нескольких аппаратных или виртуальных серверов. Corosync отслеживает и передает состояние всех участников (нод) в кластере.

Этот продукт позволяет:

1. мониторить статус приложений;
2. оповещать приложения о смене активной ноды в кластере;
3. отправлять идентичные сообщения процессам на всех нодах;
4. предоставлять доступ к общей базе данных с конфигурацией и статистикой;
5. отправлять уведомления об изменениях, произведенных в базе.

---

### Задание 3

Соберите модель, состоящую из двух виртуальных машин. Установите Pacemaker, Corosync, Pcs. Настройте HA кластер.

*Пришлите скриншот рабочей конфигурации и состояния сервиса для каждого нода.*

#### ОТВЕТ:

![Скриншот-1](https://github.com/Monooks/10-03_NetoHW/blob/main/img/10.03_1.png)
![Скриншот-2](https://github.com/Monooks/10-03_NetoHW/blob/main/img/10.03_2.png)

---

### Задания со звёздочкой*
Эти задания дополнительные. Выполнять их не обязательно. Это не повлияет на зачёт. Вы можете их выполнить, если хотите глубже разобраться в материале.
 
---

### Задание 4

Установите и настройте DRBD-сервис для настроенного кластера.

*Пришлите скриншот рабочей конфигурации и состояние сервиса для каждого нода.*
